## 项目设计文档：基于百度AI的车辆识别系统

## 一、项目概述

项目目标是开发一个集成百度车辆检测API、车型识别API和车牌识别API，具备图形用户界面的应用程序。通过PyQT5框架构建用户界面，用户能够上传图片，系统则自动调用多种百度API进行车辆检测与识别，最终展示每辆车的车牌、车种、品牌、颜色等详细信息。

应用于交通管理与监控领域，政府部门或交通管理机构可以利用此应用程序对交通监控摄像头拍摄的图片进行快速分析，识别违规停车、非法行驶等行为，提高交通管理效率。

应用于汽车经销商进行车辆展示和销售支持，通过识别车辆信息为客户提供更精准的产品介绍，比如哪种车耐撞、哪种车在某种地形广泛使用。

应用于小区、工业园区等场所的安防系统，对进出车辆进行监控和识别，增强安全防范能力。停车场管理系统集成此应用，可自动识别进出车辆的车牌信息，实现快速进出和无人值守，提升用户体验和停车场运营效率。对停车场内的车辆进行实时监控，确保车位使用合理，防止非法占用。

 

## 二、功能结构

### （一）功能结构图与流程图

![img](https://gitee.com/StartYourDream/ApiVehicleDetect/raw/master/FuncSturctureChart.png) 

> ##### 图 2.1.1 功能结构图

 

![img](https://gitee.com/StartYourDream/ApiVehicleDetect/raw/master/UserFlowChart.png) 

> ##### 图 2.1.1 用户流程图

 

### （二） 用户界面

#### 1、初始界面

简洁的启动画面，包含一个进入主界面的按钮。

#### 2、主界面

图片展示区：用于显示用户上传的图片及识别结果标注，如车辆位置框。

结果展示区：以列表或表格形式展示每辆车的识别结果，包括车牌、品牌、  颜色等信息

#### 3、功能按钮

上传按钮：触发文件选择对话框，允许用户选择图片文件。

识别按钮：在用户上传图片后，点击此按钮调用API进行识别，并更新结果展示区。

#### 4、上传界面

标准的文件选择对话框，用户选择图片后自动关闭并返回主界面。

 

### （三）后端处理

1、图片处理：读取用户上传的图片文件，进行必要的预处理（如调整大小、格式转换）以符合API要求。

 

2、API调用：

 使用Python的requests库向百度AI的车辆检测API发送请求，获取图片中车辆的位置信息。

 根据车辆位置信息，可能需要裁剪图片或调整参数，再向车型识别API发送请求，获取车牌、车型、颜色等详细信息。

 数据处理：解析API返回的JSON数据，提取有用信息，并准备用于界面展示的格式。

### （四）交互逻辑

 确保用户界面的响应性，如点击按钮后立即显示加载动画或进度条。

 处理各种异常情况，如文件上传失败、网络请求错误、API返回无效数据等，并向用户显示友好的错误提示。

## 三、技术结构

### （一）用户界面设计

 

使用PyQT5的QWidget、QPushButton、QLabel、QListWidget等控件构建界面。

确保界面布局合理，信息展示清晰，操作直观易懂。考虑使用Qt Designer进行界面设计，以提高开发效率。

### (二）API集成

通过百度AI的车辆检测与车型识别API文档，了解请求参数、响应格式及限制条件。

 编写Python函数封装API调用逻辑，包括请求发送、响应接收及错误处理。

考虑到API可能存在的限流或配额限制，实现合理的调用策略，如缓存结果、限制调用频率等。

### （三）结果展示

设计合理的展示方式，使识别结果一目了然。例如，在图片上绘制矩形框标注车辆位置，并在列表或表格中详细列出每辆车的识别信息。

考虑使用颜色、图标等视觉元素增强展示效果。

### （四）错误处理

对文件上传、API调用等关键步骤进行异常捕获，确保程序在遇到错误时能够稳定运行并给出明确的错误提示。

提供用户友好的错误处理机制，如重试按钮、错误详情查看等。

 

### （五）界面设计——低保真原型图

![img](https://gitee.com/StartYourDream/ApiVehicleDetect/blob/master/LoginInterface.png) 

> ##### 图 3.5.1 初始界面

 

 

![img](https://gitee.com/StartYourDream/ApiVehicleDetect/raw/master/MainInterface.png) 

> ##### 图 3.5.2 主界面

![img](https://gitee.com/StartYourDream/ApiVehicleDetect/raw/master/FileInterface.png) 

> ##### **图 3.5.3 文件上传界面**

## 四、总结

​      百度API的强大能力远超出我的预期，几行代码就能使用效果出色的模型，再加上一个简单的界面就能做出一个有实用价值的应用。将来 几个人的团队就能开发出色软件的未来可期，转行也迫在眉睫 。

​    根据API调取学到的图片上传的思路，以二进制读模式打开指定路径的图片文， 将图片内容读取后编码为Base64字符串，并解码为UTF-8格式的字符串。将Base64编码的图片作为请求参数。

​     我开始有点不明白为什么不直接把文件地址作为参数，而要进行编码。后来发现可能是因为API通常要求以特定的数据格式（如Base64编码的字符串）发送图片，以便在API内部进行解析和处理。这种格式通常比原始图片文件更紧凑，并且可以直接嵌入到JSON或XML等数据结构中。此外，对图片数据进行Base64编码还可以避免在传输过程中出现二进制数据损坏的问题。

​     在使用PyQT5的过程中，我一开始对信号槽的使用只停留在按钮上，所以感觉它就像触发器，把函数绑在按钮上，一按就触发。后来用到了QtCore.pyqtSignal() ，它是 PyQt5 中用于定义自定义信号的一个关键工具。可以创建自己的信号，用这个信号在不同对象之间传递图像信息，比如在上传文件的函数中发出信号，让信号携带文件地址到调用API的函数中，比全局变量更加的安全可靠，非常灵活有趣。

​     学习中碰到最大的问题就是多窗口切换，一开始我的子函数在UI类里设置组件,在另一个MainWindow里初始化，绑定槽函数（我现在也  想不通为什么这么写），所以一开始切换窗口时，只能打开窗口但里面的功能使用不了，或者干脆打不开，后来把子窗口改写在一个类里就可以了。

​     通过这次实验我对计算机图像处理、API调用，QT有了更深刻的了解。